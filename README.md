# social_network_system_design
System design of a social network for an educational course -
[System Design by Balun.Courses](https://balun.courses/courses/system_design)

### Функциональные требования:
- личные сообщения и чаты (текст и медиа),
- прочитанность сообщений,
- публикация постов в ленту (текст и медиа),
- добавление друзей, 
- добавление отношений, 
- добавление подписок,
- добавление анкеты пользователя.

### Нефункциональные требования:
- 50 000 000 DAU,
- availability 99,95%,
- сообщения всегда сохраняются,
- response time на отправку - 1 секунда,
- response time на получение - 5 секунд,
- максимальный размер сообщения - 4096 символов,
- максимальный размер медиа - 2 гб,
- в среднем пользователь:
  - читает сообщения 10 раз в день,
  - пишет сообщения 2 раз в день,
  - скачивает медиа 1 раз в день,
  - загружает медиа 1 раз в неделю,
  - читает посты 10 раз в день,
  - пишет пост 1 раз в неделю,
  - средний размер медиа - 1 МБ,
- данные должны храниться 5 лет,
- преимущественно пользователи из СНГ,
- сезонности нет.

## Основной расчет:
    DAU = 50 000 000
    Рассчетное время хранения данных = 5 лет
    Фактор репликации = 3

RPS и traffic работы с сообщениями (отправка/чтение):

    В среднем юзер читает сообщения 10 раз в день, пишет 2 раза в день
    RPS(read) = 50 000 000 * 10 / 86 400 ~= 5800 r/с
    RPD(write) = 50 000 000 * 2 / 86 400 ~= 1200 r/с

    traffic_per_second(write) = 1200 * 4096 * 2 Б = 10 МБ/с  
    traffic_per_year(write) =  10 * 86400 * 365 = 315 ТБ/год

    message_required_memory = 315 * 5 * 3 = 5 ПБ

RPS и traffic работы с медиа (отправка/чтение):

    В среднем юзер скачивает медиа 1 раз в день, загружает 1 раз в неделю
    RPS(read) = 50 000 000 * 1 / 86 400 ~= 580 r/s
    RPD(write) = 50 000 000 * 1 / 7 / 86 400 ~= 85 r/s

    traffic_per_second(write) = 85 * 1 МБ = 85 МБ/с  
    traffic_per_year(write) =  85 * 86400 * 365 = 3 ПБ/год

    media_required_memory = 3 * 5 * 3= 45 ПБ

RPS и traffic работы с постами (отправка/чтение):

    В среднем юзер читает посты 10 раз в день, пишет 1 раз в неделю
    RPS(read) = 50 000 000 * 10 / 86 400 ~= 5800 r/с
    RPD(write) = 50 000 000 * 1 / 7 / 86 400 ~= 85 r/с

    traffic_per_second(write) = 85 * 4096 * 2 Б = 1 МБ/с  
    traffic_per_year(write) =  1 * 86400 * 365 = 31 ТБ/год

    post_required_memory = 31 * 5 * 3= 500 ТБ

Итого суммарно необходимо памяти:

    required_memory = 5 ПБ + 45 ПБ + 500 ТБ = 50,5 ПБ
