# social_network_system_design
System design of a social network for an educational course -
[System Design by Balun.Courses](https://balun.courses/courses/system_design)

### Функциональные требования:
- личные сообщения и чаты (текст и медиа),
- прочитанность сообщений,
- публикация постов в ленту (текст и медиа),
- добавление друзей, 
- добавление отношений, 
- добавление подписок,
- добавление анкеты пользователя.

### Нефункциональные требования:
- 100 000 000 DAU,
- availability 99,95%,
- сообщения всегда сохраняются,
- response time на отправку - 1 секунда,
- response time на получение - 5 секунд,
- максимальный размер сообщения - 4096 символов,
- максимальный размер медиа - 2 гб,
- в среднем пользователь:
  - читает сообщения 10 раз в день,
  - пишет сообщения 2 раз в день,
  - скачивает медиа 1 раз в день,
  - загружает медиа 1 раз в неделю,
  - читает посты 10 раз в день,
  - пишет пост 1 раз в неделю,
  - средний размер медиа - 100 МБ,
- данные должны храниться 5 лет,
- преимущественно пользователи из СНГ,
- сезонности нет.

## Основной расчет:
    DAU = 100 000 000
    Рассчетное время хранения данных = 5 лет
    Фактор репликации = 3

RPS и traffic работы с сообщениями (отправка/чтение):

    В среднем юзер читает сообщения 10 раз в день, пишет 2 раза в день
    RPS(read) = 100 000 000 * 10 / 86 400 ~= 11500 r/с
    RPD(write) = 100 000 000 * 2 / 86 400 ~= 2300 r/с

    traffic_per_second(write) = 2300 * 4096 * 2 Б = 19 МБ/с  
    traffic_per_year(write) =  19 * 86400 * 365 = 600 ТБ/год

    required_memory = 600 * 5 * 3 = 9 ПБ

RPS и traffic работы с медиа (отправка/чтение):

    В среднем юзер скачивает медиа 1 раз в день, загружает 1 раз в неделю
    RPS(read) = 100 000 000 * 1 / 86 400 ~= 1150 r/s
    RPD(write) = 100 000 000 * 1 / 86 400 / 7 ~= 165 r/s

    traffic_per_second(write) = 165 * 100 МБ = 16,5 ГБ/с  
    traffic_per_year(write) =  16,5 * 86400 * 365 = 520 ПБ/год

    required_memory = 520 * 5 * 3= 2,6 ЭБ

RPS и traffic работы с постами (отправка/чтение):

    В среднем юзер читает посты 10 раз в день, пишет 1 раз в неделю
    RPS(read) = 100 000 000 * 10 / 86 400 ~= 11500 r/с
    RPD(write) = 100 000 000 * 1 / 86 400 / 7 ~= 165 r/с

    traffic_per_second(write) = 165 * 50000 * 2 Б = 16,5 МБ/с  
    traffic_per_year(write) =  16,5 * 86400 * 365 = 520 ТБ/год

    required_memory = 520 * 5 * 3= 2,6 ПБ
